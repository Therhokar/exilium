import{c as C}from"./ChapterData-1511dfcb.js";import{j as $,S as j}from"./SiteNotice-0721fdce.js";import{a as N}from"./txtstore-c6894446.js";import{q as k,_ as w,r as A,o as t,c as e,a as s,t as d,F as h,e as f,u as g,h as L,i as b}from"./index-3b537021.js";const n=k({viewIdx:0,cptId:0,avgNo:"",avgName:""});const T={id:"stage-list"},V=["num"],M=["src"],B={__name:"AvgList",props:["chapterName"],setup(x){const p=x,c="/exilium/avg/"+n.cptId+"/",l=A([]),r=fetch(c+"roadmap.json").then(a=>a.json()),u=fetch(c+"detail.json").then(a=>a.json());Promise.all([r,u]).then(a=>{const o=a[0];_(o,Object.values(a[1])),l.value=o});function _(a,o){for(const i of a){const m=o.findLast(y=>y.num==i[0]);i.push((m==null?void 0:m.desc)||"")}}function v(a){const o=a.currentTarget;if(o.classList.contains("no-avg"))return;const i=o.getAttribute("num");fetch(c+i+".json").then(m=>{m.status==404?(o.lastElementChild.textContent+="（本关无AVG剧情）",o.classList.add("no-avg")):(n.avgNo=i,n.avgName=o.firstElementChild.textContent,n.viewIdx=2)})}function I(){n.viewIdx=0}return(a,o)=>(t(),e("section",null,[s("nav",null,[s("button",{onClick:I},"返回")]),s("h1",null,d(p.chapterName),1),s("div",T,[s("table",null,[(t(!0),e(h,null,f(l.value,i=>(t(),e("tr",{num:i[0],onClick:v},[s("td",null,d(i[0])+" "+d(i[1]),1),s("td",null,d(i[2]),1)],8,V))),256))]),s("img",{src:c+"map.png"},null,8,M)])]))}},E=w(B,[["__scopeId","data-v-fb52d929"]]);const S={class:"part"},F={class:"line"},H={class:"subline"},q={__name:"Avg",setup(x){const p=A([]);fetch(`/exilium/avg/${n.cptId}/${n.avgNo}.json`).then(l=>l.json()).then(l=>p.value=l);function c(){n.viewIdx=1}return(l,r)=>(t(),e("section",null,[s("nav",null,[s("button",{onClick:c},"返回")]),s("h1",null,d(g(n).avgName),1),(t(!0),e(h,null,f(p.value,(u,_)=>(t(),e("div",S,[s("h2",null,"第"+d(_+1)+"部分",1),(t(!0),e(h,null,f(u,v=>(t(),e("div",F,[(t(!0),e(h,null,f(v.split("|"),I=>(t(),e("p",H,d(I),1))),256))]))),256))]))),256))]))}},D=w(q,[["__scopeId","data-v-b18a9e34"]]);const G={key:0},O=["index","innerHTML"],P={__name:"AvgView",setup(x){const p=$(C.data),c=new Map;for(const[r,u]of p)if(r<4e3){const _=r<1e3?"第"+r+"章 ":"活动 ";c.set(r,new Map([["name",_+N(u[18][8])],["intro",N(u[170][8])]]))}function l(r){const u=+r.currentTarget.getAttribute("index");n.cptId=u,n.viewIdx=1}return(r,u)=>(t(),e(h,null,[L(j),g(n).viewIdx===0?(t(),e("ul",G,[(t(!0),e(h,null,f(g(c),([_,v])=>(t(),e("li",{index:_,onClick:l,innerHTML:`<span style=font-weight:bold;>${v.get("name")}</span>  ${v.get("intro")||""}`},null,8,O))),256))])):g(n).viewIdx===1?(t(),b(E,{key:1,chapterName:g(c).get(g(n).cptId).get("name")},null,8,["chapterName"])):(t(),b(D,{key:2}))],64))}},R=w(P,[["__scopeId","data-v-5031543a"]]);export{R as default};
